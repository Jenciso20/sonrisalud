<div class="modulo">
  <header class="modulo__header">
    <h1>Historial de atenciones</h1>
    <p>Listado completo seg√∫n tu rol.</p>
    <a routerLink="/menu" class="modulo__volver">Volver al menu</a>
  </header>

  <section class="modulo__seccion">
    <div class="estado" *ngIf="loading">Cargando...</div>
    <div class="estado estado--error" *ngIf="error">{{ error }}</div>
    <div class="estado" *ngIf="!loading && !registros.length">Sin registros</div>

    <div class="tabla" *ngIf="!loading && registros.length">
      <div class="tabla__head">
        <div>Fecha</div>
        <div>Paciente</div>
        <div>Odontologo</div>
        <div>Estado</div>
        <div>Detalle</div>
      </div>
      <div class="tabla__row" *ngFor="let r of registros">
        <div>{{ r.inicio | date:'dd/MM HH:mm' }} - {{ r.fin | date:'HH:mm' }}</div>
        <div>{{ r.paciente?.nombre || ('#'+r.pacienteId) }}</div>
        <div>{{ r.odontologo?.nombre || ('#'+r.odontologoId) }}</div>
        <div>{{ r.estado }}</div>
        <div>{{ r.nota || r.motivo || '-' }}</div>
      </div>
    </div>
  </section>
</div>
