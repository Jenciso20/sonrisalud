<div class="login-wrapper">
  <div class="login-card">
    <div class="logo">
      <img src="https://cdn-icons-png.flaticon.com/512/3063/3063187.png" alt="SonriSalud Logo" />
      <h1>SonriSalud</h1>
      <p class="subtitle">Sistema Inteligente Odontologico</p>
    </div>

    <!-- Tabs login / registro -->

        <form *ngIf="isLogin" (ngSubmit)="onLogin()">
      <div class="input-group">
        <label>Correo</label>
        <input type="email" [(ngModel)]="correo" name="correo" required placeholder="correo@ejemplo.com" />
      </div>
      <div class="input-group">
        <label>Contrasena</label>
        <input type="password" [(ngModel)]="password" name="password" required placeholder="********" />
      </div>
      <div class="forgot-container">
        <a href="#" (click)="onForgotPassword($event)">Olvidaste tu contrasena?</a>
      </div>
      <button type="submit" class="btn-login" [disabled]="isSubmitting">
        {{ isSubmitting ? 'Cargando...' : 'Iniciar sesion' }}
      </button>
      <div class="small-links" *ngIf="allowRegister">
        <a href="#" (click)="goRegister(); $event.preventDefault()">Crear cuenta</a>
      </div>
    </form>

    <form *ngIf="allowRegister && !isLogin" (ngSubmit)="onRegister()">
      <div class="input-group">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="nombre" name="nombre" required placeholder="Nombres" maxlength="100" />
      </div>

      <div class="input-group">
        <label>Apellidos</label>
        <input type="text" [(ngModel)]="apellidos" name="apellidos" placeholder="Apellidos" maxlength="100" />
      </div>

      <div class="input-group">
        <label>Correo</label>
        <input type="email" [(ngModel)]="correo" name="correo" required placeholder="correo@ejemplo.com" />
      </div>

      <div class="input-group">
        <label>Contrasena</label>
        <input type="password" [(ngModel)]="password" name="password" required placeholder="********" minlength="8" />
      </div>

      <div class="input-group">
        <label>Confirmar contrasena</label>
        <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword" required placeholder="Repite la contrasena" minlength="8" />
      </div>

      <div class="input-group">
        <label>Telefono (opcional)</label>
        <input type="tel" [(ngModel)]="telefono" name="telefono" placeholder="Ej: 999999999" pattern="^9\\d{8}$" maxlength="9" />
      </div>

      <div class="input-group">
        <label>DNI (opcional)</label>
        <input type="text" [(ngModel)]="dni" name="dni" placeholder="DNI" pattern="^\\d{8}$" maxlength="8" />
      </div>

      <div class="input-group">
        <label>Codigo Universitario (opcional)</label>
        <input type="text" [(ngModel)]="codigoUniversitario" name="codigoUniversitario" placeholder="Codigo Universitario" />
      </div>

      <button type="submit" class="btn-login" [disabled]="isSubmitting">
        {{ isSubmitting ? 'Cargando...' : 'Crear cuenta' }}
      </button>
      <div class="small-links">
        <a href="#" (click)="goLogin(); $event.preventDefault()">Ya tengo cuenta</a>
      </div>
    </form>

    <p *ngIf="successMsg" class="success">{{ successMsg }}</p>
    <p *ngIf="errorMsg" class="error">{{ errorMsg }}</p>
  </div>
</div>

<div class="modal" *ngIf="showModal">
  <div class="modal-content">
    <h2>Recuperar contrasena</h2>
    <input
      type="email"
      [(ngModel)]="recoverEmail"
      placeholder="Ingresa tu correo registrado"
      required
    />
    <button class="btn-login" (click)="sendRecovery()" [disabled]="isRecovering">
      {{ isRecovering ? 'Enviando...' : 'Enviar correo' }}
    </button>
    <p *ngIf="recoverMessage" class="info">{{ recoverMessage }}</p>
    <button class="close" (click)="closeModal()">Cerrar</button>
  </div>
</div>



