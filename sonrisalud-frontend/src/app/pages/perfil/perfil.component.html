<div class="perfil">
  <header class="perfil__header">
    <div>
      <p class="kicker">Configuracion</p>
      <h1>Mi perfil</h1>
      <p class="sub">Actualiza tus datos personales y tu contraseña.</p>
    </div>
    <a routerLink="/menu" class="back">← Volver</a>
  </header>

  <div class="card">
    <div class="estado error" *ngIf="error">{{ error }}</div>
    <div class="estado ok" *ngIf="ok">{{ ok }}</div>
    <div class="estado" *ngIf="loading">Cargando...</div>

    <form *ngIf="!loading" (ngSubmit)="guardar()">
      <div class="grid">
        <label class="campo">
          <span>Nombre</span>
          <input type="text" [(ngModel)]="usuario.nombre" name="nombre" required />
        </label>
        <label class="campo">
          <span>Apellidos</span>
          <input type="text" [(ngModel)]="usuario.apellidos" name="apellidos" />
        </label>
        <label class="campo">
          <span>Correo</span>
          <input type="email" [value]="usuario.correo" disabled />
        </label>
        <label class="campo">
          <span>Telefono</span>
          <input type="text" [(ngModel)]="usuario.telefono" name="telefono" pattern="^9\\d{8}$" maxlength="9" />
        </label>
        <label class="campo">
          <span>DNI</span>
          <input type="text" [(ngModel)]="usuario.dni" name="dni" pattern="^\\d{8}$" maxlength="8" />
        </label>
        <label class="campo">
          <span>Codigo Univ.</span>
          <input type="text" [(ngModel)]="usuario.codigoUniversitario" name="codigoUniversitario" maxlength="15" />
        </label>
      </div>

      <div class="pass-block">
        <h3>Cambiar contraseña</h3>
        <div class="grid grid--3">
          <label class="campo">
            <span>Actual</span>
            <input type="password" [(ngModel)]="currentPassword" name="currentPassword" />
          </label>
          <label class="campo">
            <span>Nueva</span>
            <input type="password" [(ngModel)]="newPassword" name="newPassword" />
          </label>
          <label class="campo">
            <span>Confirmar</span>
            <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword" />
          </label>
        </div>
        <p class="hint">Deja en blanco si no quieres cambiar tu contraseña.</p>
      </div>

      <div class="actions">
        <button class="btn primary" type="submit" [disabled]="saving">{{ saving ? 'Guardando...' : 'Guardar cambios' }}</button>
        <button class="btn ghost" type="button" routerLink="/menu">Cancelar</button>
      </div>
    </form>
  </div>
</div>
